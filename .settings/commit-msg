#!/bin/bash
COMMIT_MSG_FILE="$1"
# Read the commit message from the file
commit_msg=$(cat "$COMMIT_MSG_FILE")
echo -e "$commit_msg \n"

# Path to the commit-msg file
COMMIT_MSG_FILE="commit-msg"

# Read the second line from the commit-msg file
second_line=$(sed -n '2p' "$COMMIT_MSG_FILE")

# Regex pattern to match and capture the string after "* [A-Z]:"
regex_pattern="^\* \[A-Z\]: (.*)"

# Check if the second line matches the regex pattern
if [[ $second_line =~ $regex_pattern ]]; then
    # Extract the string after the pattern
    extracted_string="${BASH_REMATCH[1]}"
    if [[ -z $extracted_string ]]; then
        echo "Commit was not changed."
    else
        echo "String after pattern: $extracted_string"
    fi
else
    echo "The second line does not match the specified pattern."
fi
# LINES=()
# while IFS= read -r line; do
# 	LINES+=("$line")
# done < "$COMMIT_MSG_FILE"
# # Define the regular expression pattern to match the "* [A-Z]:" part and capture everything after it
# regex_pattern="^\* \[A-Z\]: (.*)"

# # regex_pattern="^\* (Fix|Update in files|Docs|Feat|Style|Test|Refactor): (.*)"
# matching_lines=$(echo "${LINES[1]}" | grep -E "$regex_pattern")
# echo -e "$matching_lines\n"
# echo -e "${LINES[1]}\n"
# # Corrected regex check using [[ ]] and =~
# if [[ "${LINES[1]}" =~ $regex_pattern ]]; then
#     # Extract the content after "* [A-Z]:"
#     content_after_pattern="${BASH_REMATCH[1]}"  # Corrected to use [1] since it's the first capture group
#     echo "Content after pattern: $content_after_pattern"
    
#     # Compare the extracted content with the default message to see if it was modified
#     default_message="~ Autor: Victoria Lizarraga (@VictoriaLizCor / @lilizarr) ~"
#     if [[ "$content_after_pattern" != "$default_message" ]]; then
#         echo "The commit message was modified after the specified pattern."
#     else
#         echo "The commit message was not modified after the specified pattern."
#     fi
# else
#     echo "The specified pattern was not found in the commit message."
#     exit 1  # Exit with failure status if the pattern is not found
# fi
# Check if the commit message contains the specified content
# if [[ $commit_msg =~ $regex_pattern ]]; then
#     # Extract the content after "* [A-Z]:"
#     content_after_pattern="${BASH_REMATCH[2]}"
#     echo "Content after pattern: $content_after_pattern"
    
#     # Compare the extracted content with the default message to see if it was modified
#     default_message="~ Autor: Victoria Lizarraga (@VictoriaLizCor / @lilizarr) ~"
#     if [[ "$content_after_pattern" != "$default_message" ]]; then
#         echo "The commit message was modified after the specified pattern."
#     else
#         echo "The commit message was not modified after the specified pattern."
#     fi
# else
#     echo "The specified pattern was not found in the commit message."
#     exit 1  # Exit with failure status if the pattern is not found
# fi

# Check if commit_msg was modified
# if [[ "$commit_msg" != "$original_commit_msg" ]]; then
# 	echo -e "$commit_msg \n"
# 	exit 0
# else
# 	echo "NO changes made"
# 	exit 1
# fi